#!/bin/bash

# Define the base command template
command_template="shifter --image=amahesh19/modulus-makani:0.1.0-torch_patch-23.11-multicheckpoint --module=gpu,nccl-2.18 bash -c \"source set_74ch_vars.sh; python -u -m earth2mip.score_extreme_diagnostics --output_path /pscratch/sd/a/amahesh/hens/time_collection/bred_29multicheckpoint_pert0p35_k1i3_500km_oppositepert_detfix_nodpr_timeevolve_hemisphererescale_target48_20minus20_newseed_repeat_qperturbfix_rankhist_qmin0_summer2023/%s/extreme_stats/ --input_path /pscratch/sd/a/amahesh/hens/time_collection/bred_29multicheckpoint_pert0p35_k1i3_500km_oppositepert_detfix_nodpr_timeevolve_hemisphererescale_target48_20minus20_newseed_repeat_qperturbfix_rankhist_qmin0_summer2023/%s/ --extreme_scoring /pscratch/sd/a/amahesh/hens/thresholds/ --efi_path /pscratch/sd/a/amahesh/hens/mclimate_prod/daily_mclimate_percentiles/ \""

dates=(
#"2023-06-01T00:00:00"
#"2023-06-02T00:00:00"
#"2023-06-03T00:00:00"
#"2023-06-04T00:00:00"
#"2023-06-05T00:00:00"
#"2023-06-06T00:00:00"
#"2023-06-07T00:00:00"
#"2023-06-08T00:00:00"
#"2023-06-09T00:00:00"
#"2023-06-10T00:00:00"
#"2023-06-11T00:00:00"
#"2023-06-12T00:00:00"
#"2023-06-13T00:00:00"
#"2023-06-14T00:00:00"
#"2023-06-15T00:00:00"
#"2023-06-16T00:00:00"
#"2023-06-17T00:00:00"
#"2023-06-18T00:00:00"
#"2023-06-19T00:00:00"
#"2023-06-20T00:00:00"
#"2023-06-21T00:00:00"
#"2023-06-22T00:00:00"
#"2023-06-23T00:00:00"
#"2023-06-24T00:00:00"
#"2023-06-25T00:00:00"
#"2023-06-26T00:00:00"
#"2023-06-27T00:00:00"
#"2023-06-28T00:00:00"
#"2023-06-29T00:00:00"
#"2023-06-30T00:00:00"
#"2023-07-01T00:00:00"
#"2023-07-02T00:00:00"
#"2023-07-03T00:00:00"
#"2023-07-04T00:00:00"
#"2023-07-05T00:00:00"
#"2023-07-06T00:00:00"
#"2023-07-07T00:00:00"
#"2023-07-08T00:00:00"
#"2023-07-09T00:00:00"
#"2023-07-10T00:00:00"
#"2023-07-11T00:00:00"
#"2023-07-12T00:00:00"
#"2023-07-13T00:00:00"
#"2023-07-14T00:00:00"
#"2023-07-15T00:00:00"
#"2023-07-16T00:00:00"
#"2023-07-17T00:00:00"
#"2023-07-18T00:00:00"
#"2023-07-19T00:00:00"
"2023-07-20T00:00:00"
"2023-07-21T00:00:00"
"2023-07-22T00:00:00"
"2023-07-23T00:00:00"
"2023-07-24T00:00:00"
"2023-07-25T00:00:00"
"2023-07-26T00:00:00"
"2023-07-27T00:00:00"
"2023-07-28T00:00:00"
"2023-07-29T00:00:00"
"2023-07-30T00:00:00"
"2023-07-31T00:00:00"
"2023-08-01T00:00:00"
"2023-08-02T00:00:00"
"2023-08-03T00:00:00"
"2023-08-04T00:00:00"
"2023-08-05T00:00:00"
"2023-08-06T00:00:00"
"2023-08-07T00:00:00"
"2023-08-08T00:00:00"
"2023-08-09T00:00:00"
"2023-08-10T00:00:00"
"2023-08-11T00:00:00"
"2023-08-12T00:00:00"
"2023-08-13T00:00:00"
"2023-08-14T00:00:00"
"2023-08-15T00:00:00"
"2023-08-16T00:00:00"
"2023-08-17T00:00:00"
"2023-08-18T00:00:00"
"2023-08-19T00:00:00"
"2023-08-20T00:00:00"
"2023-08-21T00:00:00"
"2023-08-22T00:00:00"
"2023-08-23T00:00:00"
"2023-08-24T00:00:00"
"2023-08-25T00:00:00"
"2023-08-26T00:00:00"
"2023-08-27T00:00:00"
"2023-08-28T00:00:00"
"2023-08-29T00:00:00"
"2023-08-30T00:00:00"
)

for date in "${dates[@]}"; do
    eval $(printf "$command_template" "$date" "$date")
done

